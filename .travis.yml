---

dist: xenial

language: python

python: 3.6

env:
  - ANSIBLE_PLAYBOOK="provisioning/ci-test.yml"
    ANSIBLE_INVENTORY="localhost"

install:
  - pip install ansible

before_script:
  - echo $ANSIBLE_INVENTORY > inventory

script:
  - sudo apt-get update -y
  - sudo apt-get upgrade -y

  # Check the role/playbook's syntax
  - ansible-playbook -i inventory $ANSIBLE_PLAYBOOK --syntax-check

  # Run the role/playbook with ansible-playbook
  - ansible-playbook -i inventory $ANSIBLE_PLAYBOOK --connection=local
